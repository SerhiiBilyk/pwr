
var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)


var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)


var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)


var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)


var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)


var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)


var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)


var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)


var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)


var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)


var PureJS=(function(self){
  function getData(){
  var book=document.getElementById('book').value;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'http://localhost:8081/hello', false);
  var obj={name:'javascript',page:1}
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.send(JSON.stringify(obj));


  console.log(JSON.parse(xhr.responseText))
  /*for(let prop in result.books.book){
    console.log(result.books.book[prop])
  }
  result.books.book.forEach(function(item,index){
    console.log(item+ ' index '+index)
  })
  }
  */

  }
  return{
    getData:getData
  }
})(PureJS)

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})

app.factory('swearing',function(){
  return ['ass','fuck','asshole','kurwa']
})

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})

;
(function() {
    function toArrayByClassName(nodes) {
        return [].slice.call(document.getElementsByClassName(nodes))
    }

    function distanceToTop(element) {
        return parseInt(element.offsetTop - window.pageYOffset);
    }



    /*cross browser addClass*/


    var doc = document,
        //toArrayByClassName = nodes => [].slice.call(doc.getElementsByClassName(nodes)),
        prev = doc.getElementById('prev'),
        next = doc.getElementById('next'),
        prev2 = doc.getElementById('prev-2'),
        next2 = doc.getElementById('next-2'),
        //slides = toArrayByClassName('img'),
        slider_video = doc.getElementById('slider-video'),
        slides_video_img = toArrayByClassName('img-bind'),
        video_container = doc.getElementById('video-container'),
        films = ['lqzJqeeOAlQ', '2JOoto47aLE', 'ILek6YF1iac', 'lqzJqeeOAlQ'],
        player,
        details = doc.getElementById('details'),
        showDetails = doc.getElementById('show-details'),
        hideDetails = doc.getElementById('hide-details'),
        opacity_switch = false,
        lazyLoad = toArrayByClassName('lazy'),
        wrapper = doc.getElementById('wrapper');




    var Logos = (function(settings) {
        var zero = new Array(14).fill(),
        logosImgItem = toArrayByClassName(settings.imgCssClass),
         invoke,
         stop;
        var getRandomRange = function(min, max) {

            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min;

        }
        var imgSet = zero.map(function(element, index) {
            return element = index;
        })

        logosImgItem.forEach(function(element, index) {
            element.src = `./img/logos/logo-${imgSet[index]}.jpg`;
        })

        var draft = imgSet.splice(logosImgItem.length)
        var animation = function() {

            var random = getRandomRange(0, logosImgItem.length - 1);
            logosImgItem.forEach(function(element) {
                element.className = "logos__img";
            })
            logosImgItem.forEach(function(element, index) {
                if (random == index) {
                    element.classList.toggle("hide");
                    setTimeout(function() {
                        var newImg = draft.shift();
                        draft.push(imgSet[index])
                        imgSet[index] = newImg;
                        element.src = `./img/logos/logo-${newImg}.jpg`;
                    }, 1500)
                }
            })
        }

        return {
            invoke: function() {
                invoke = setInterval(animation, 4000);
            },
            stop: function() {
                stop = clearInterval(invoke)

            }
        }
    })({imgCssClass:"logos__img"})
    Logos.invoke()









    showDetails.addEventListener('click', scrollIt(details))
    hideDetails.addEventListener('click', scrollIt(wrapper))

    var detailsState = (function() {
        var state = false;

        function add() {
            state = true;
        }

        function sub() {
            state = false;
        }
        return {
            getState: function() {
                return state;
            },
            switcher: function() {
                state ? state = false : state = true;
            }
        }
    })()
    window.addEventListener('scroll', lazyLoader)

    function lazyLoader() {
        //  console.log(lazyLoad)
        //  var distance=distanceToTop(details);
        //  console.log('scrolling',window.pageYOffset-distance)
        lazyLoad.forEach(function(element, index) {
            var elementHeight = element.scrollHeight;
            var distance = distanceToTop(element);

            if (window.innerHeight - element.scrollHeight < window.pageYOffset - distance) {
                element.classList.add("opacity")
            }
            if (distance > window.innerHeight - elementHeight / 2 || elementHeight == 0) {

                element.classList.remove("opacity");

                //removeCssClass(element, 'opacity')

            }

        })



    }


    function scrollIt(destination) {

        var stateID;
        return function() {

            var state = detailsState.getState();
            console.log('state before click', state)
            if (!state) {
                details.className = "details display";
                showDetails.innerHTML = "hide"
                doc.body.style.overflow = "hidden";
                detailsState.switcher()
                console.log('state after click ', state)
            } else if (state) {

                //details.className = "details";
                doc.body.style.overflow = "hidden";
                showDetails.innerHTML = "learn more"
                detailsState.switcher()
                console.log('state return ', state)
            }
            /*always reset previous Interval*/
            clearInterval(stateID);
            setTimeout(function() {
                stateID = setInterval(scrollIncrement, 5);
            }, 500)


            function scrollIncrement() {
                /*
                FireFox and Internet Explorer use 'var html' height
                Chrome,Safari use 'var body' height
                startPoint + window.innerHeight === document.body.scrollHeight -> if true - bottom of document
                percentage ->quantity of scrolled %
                increment ->relative to percentage
                Math.ceil - round to biger number, if we go Down
                MAth.floor - round to less number, if we go Up
                */
                /*scrolltop scrollheight*/

                var html = document.documentElement,
                    body = document.body,
                    startPoint = window.pageYOffset || body.scrollTop || html.scrollTop,
                    toTop = distanceToTop(destination),
                    endPoint = Math.abs(toTop),
                    direction = toTop / endPoint,
                    bottom = endPoint + window.pageYOffset,
                    percentage = startPoint / ((bottom / 100)),
                    calculateStep = direction * (50 - ((50 / 100) * (percentage))),
                    increment;
                console.log('toTop', direction)

                direction > 0 ? increment = Math.ceil(calculateStep) : increment = Math.floor(calculateStep)
                if (endPoint != 1) {
                    var newY = startPoint + increment;
                    window.scrollTo(0, newY);
                } else {
                    if (direction < 0) {
                        console.log('direction less then 0, direction UP')
                        details.className = "details";
                    }
                    console.log('direction', direction)

                    clearInterval(stateID);
                    opacity_switch = true;
                    doc.body.style.overflow = "auto";



                    lazyLoader()
                }

            } //scrollIncrement
        }

    }






    function Slider(slides) {
        this.slides = toArrayByClassName(slides);
        this.slidesVideoImg = toArrayByClassName('img-bind');
        this.indexArray = ['0%', '100%', '200%', '300%'];
        this.currentSlide = 1;
        this.changeSlides();

    }

    Slider.prototype.changeSlides = function() {
        this.transitionEvent && this.slides[0].addEventListener(this.transitionEvent, this.transitionLogic);


        this.slidesVideoImg.forEach(function(element) {
            element.style.opacity = 0;
        })
        this.slidesVideoImg[this.currentSlide].style.opacity = "1";
    }
    Slider.prototype.getCurrentSlideIndex = function() {
        return this.currentSlide;
    }
    Slider.prototype.incrementSlideIndex = function(increment) {

        this.currentSlide += increment;
        this.currentSlide > this.slides.length - 1 ? this.currentSlide = 0 : false;
        this.currentSlide < 0 ? this.currentSlide = this.slides.length - 1 : false;

        this.slides.forEach(function(element) {
            var attr = parseInt(element.getAttribute('data-index'));
            attr += increment;
            attr > 3 ? attr = 0 : false;
            attr < 0 ? attr = 3 : false;

            element.setAttribute('data-index', attr);
        })
    }
    Slider.prototype.animatedSlide = function(dataIndex) {
        var app = this;
        this.slides.forEach(function(element, index) {

            var computed = getComputedStyle(element)
            var data_index = parseInt(element.getAttribute('data-index'));

            if (data_index == dataIndex) {

                element.style.zIndex = "-1";
            }
            element.style.left = app.indexArray[data_index];
        })
    }

    Slider.prototype.transitionEvent = function() {


        this.transitionEvent = (function() {
            var t;
            var el = slides[0]
            var transitions = {
                'transition': 'transitionend',
                'OTransition': 'oTransitionEnd',
                'MozTransition': 'transitionend',
                'WebkitTransition': 'webkitTransitionEnd'
            }

            for (t in transitions) {
                if (el.style[t] !== undefined) {
                    return transitions[t];
                }
            }
        })()
        return this.transitionEvent;
    }
    Slider.prototype.transitionLogic = function() {

        var app = this;
        app.slides.forEach(function(element, index) {
            var data_index = parseInt(element.getAttribute('data-index'));
            if (data_index == 0) {

                var computed = getComputedStyle(element)
                if (computed.left == '0px') {

                    element.style.zIndex = "1";
                }
            }
            if (data_index == app.slides.length - 1) {

                element.style.zIndex = "1";

            }
        })

    }
    Slider.prototype.move = function(increment, dataIndex, binded) {


        var app = this;

        return function() {
            app.transitionLogic()
            app.incrementSlideIndex(increment);
            binded ? app.changeSlides() : false;

            app.animatedSlide(dataIndex)
        }
    }
    var app = new Slider('img-1')


    prev.addEventListener('click', app.move(1, 0, true));
    next.addEventListener('click', app.move(-1, 3, true))


    var app2 = new Slider('img-2');


    prev2.addEventListener('click', app2.move(1, 0, false));
    next2.addEventListener('click', app2.move(-1, 3, false))


    slider_video.addEventListener('click', function(e) {
        var loadScript = (function() {
            var tag = document.createElement('script');
            tag.src = "https://www.youtube.com/player_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        })()
        if (player) {
            player.loadVideoById({
                'videoId': films[app.getCurrentSlideIndex()]
            });
            player.playVideo();
            video_container.className = "video-container show";
        }
    })
    window.onYouTubePlayerAPIReady = function() {

        player = new YT.Player('player', {
            height: '1000',
            width: '1000',
            playerVars: {
                'controls': 0,
                'rel': 0,
                'modestbranding': 0,
                'autoplay': 1,
                'enablejsapi': 1

            },
            events: {
                'onReady': onReady,
                'onStateChange': closeVideo
            }

        });

        function onReady(e) {

            player.loadVideoById({
                'videoId': films[app.getCurrentSlideIndex()]
            });
            //  player.playVideo()
            setTimeout(function() {
                video_container.className = "video-container show";
            }, 500)

        }

        function closeVideo(e) {

            if (e.data == 2 || e.data == 0) {
                video_container.className = "video-container";
                player.stopVideo();
                return;
            }
        }
    }



})() //global IIF


;
(function() {

    function toArrayByClassName(nodes) {
        return [].slice.call(document.getElementsByClassName(nodes))
    }
    var doc = document,
        //toArrayByClassName = nodes => [].slice.call(doc.getElementsByClassName(nodes)),
        header = doc.getElementById('header'),
        prev = doc.getElementById('prev'),
        next = doc.getElementById('next'),
        navItem = toArrayByClassName('nav-item'),
        dropdownContainer = toArrayByClassName('dropdown-container'),
        dropdownMenu = toArrayByClassName('dropdown-menu'),
        parallaxItem = toArrayByClassName('anim-item-1'),
        animatedBlocks = toArrayByClassName('anim-item-2'),
        animatedBlocks3 = toArrayByClassName('anim-item-3'),
        slides = toArrayByClassName('slide');



    /**
     *@param {object} settings, properties: prev/next(button objects), slides (slide, usually 'LI' element)
     */
    var slider = (function(settings) {

        /*private method*/
        var currentIndex = 0,
            slideIndex = 1,
            slideClick,
            /*closure*/
            wrapper = n => slideClick = () => slideRender(slideIndex += n);
        settings.prev.addEventListener('click', wrapper(-1));
        settings.next.addEventListener('click', wrapper(1));
        /*private method*/
        function slideRender(n) {
            var i,
                slides = settings.slides;

            n > slides.length ? slideIndex = 1 : false;
            n < 1 ? slideIndex = slides.length : false;

            slides.forEach(function(element, index) {
                element.style.display = "none";
                index == slideIndex - 1 ? element.style.opacity = "0" : false;
            });
            slides[slideIndex - 1].style.display = "block";
            setTimeout(function() {
                slides[slideIndex - 1].style.opacity = "1";
            }, 0)

        }
        slideRender(slideIndex);
        return {
            wrapper: wrapper,
            slideRender: slideRender
        }
    })({
        prev: prev,
        next: next,
        slides: slides
    });




    window.addEventListener('resize', function(e) {
        function transitionNone(element) {
            element.style.transition = "none";
        }
        var mix = parallaxItem.concat(animatedBlocks, animatedBlocks3 /*, navItem*/ );
        mix.forEach(transitionNone);
    });
    window.addEventListener('load', function(e) {
        parallaxItem.forEach(function(element) {
            element.style.transition = "all 1s ease";
        })
        setTimeout(function() {
            window.scrollTo(0, 0);
        });
    });

    doc.addEventListener("scroll", function(e) {
        var run = new Promise(
            function(res, rej) {
                var pageYOffset = window.pageYOffset;
                if (e) {
                    if (pageYOffset < 10) {
                        header.className = "";
                    }
                    if (pageYOffset > 100) {
                        header.className = "scrolled";
                        parallaxItem.forEach(function(element, index) {
                            element.className = "anim-item-1 item-" + (index + 1);
                        });
                    }
                    if (pageYOffset > 400) {
                        animatedBlocks.forEach(function(element, index) {
                            element.className = "anim-item-2 item-" + (index + 5);
                        })
                    }
                    if (pageYOffset > 600) {
                        animatedBlocks3.forEach(function(element, index) {
                            element.className = "anim-item-3 item-" + (index + 8);
                        })
                    }

                    res('done')
                } else {
                    rej('cancel')
                }
            }
        );
        run.then(function(result) {

        })
    });
})

app.factory('swearing',function(){
  return ['ass','fuck','asshole','kurwa']
})

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})

;
(function() {
    function toArrayByClassName(nodes) {
        return [].slice.call(document.getElementsByClassName(nodes))
    }

    function distanceToTop(element) {
        return parseInt(element.offsetTop - window.pageYOffset);
    }



    /*cross browser addClass*/


    var doc = document,
        //toArrayByClassName = nodes => [].slice.call(doc.getElementsByClassName(nodes)),
        prev = doc.getElementById('prev'),
        next = doc.getElementById('next'),
        prev2 = doc.getElementById('prev-2'),
        next2 = doc.getElementById('next-2'),
        //slides = toArrayByClassName('img'),
        slider_video = doc.getElementById('slider-video'),
        slides_video_img = toArrayByClassName('img-bind'),
        video_container = doc.getElementById('video-container'),
        films = ['lqzJqeeOAlQ', '2JOoto47aLE', 'ILek6YF1iac', 'lqzJqeeOAlQ'],
        player,
        details = doc.getElementById('details'),
        showDetails = doc.getElementById('show-details'),
        hideDetails = doc.getElementById('hide-details'),
        opacity_switch = false,
        lazyLoad = toArrayByClassName('lazy'),
        wrapper = doc.getElementById('wrapper');




    var Logos = (function(settings) {
        var zero = new Array(14).fill(),
        logosImgItem = toArrayByClassName(settings.imgCssClass),
         invoke,
         stop;
        var getRandomRange = function(min, max) {

            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min;

        }
        var imgSet = zero.map(function(element, index) {
            return element = index;
        })

        logosImgItem.forEach(function(element, index) {
            element.src = `./img/logos/logo-${imgSet[index]}.jpg`;
        })

        var draft = imgSet.splice(logosImgItem.length)
        var animation = function() {

            var random = getRandomRange(0, logosImgItem.length - 1);
            logosImgItem.forEach(function(element) {
                element.className = "logos__img";
            })
            logosImgItem.forEach(function(element, index) {
                if (random == index) {
                    element.classList.toggle("hide");
                    setTimeout(function() {
                        var newImg = draft.shift();
                        draft.push(imgSet[index])
                        imgSet[index] = newImg;
                        element.src = `./img/logos/logo-${newImg}.jpg`;
                    }, 1500)
                }
            })
        }

        return {
            invoke: function() {
                invoke = setInterval(animation, 4000);
            },
            stop: function() {
                stop = clearInterval(invoke)

            }
        }
    })({imgCssClass:"logos__img"})
    Logos.invoke()









    showDetails.addEventListener('click', scrollIt(details))
    hideDetails.addEventListener('click', scrollIt(wrapper))

    var detailsState = (function() {
        var state = false;

        function add() {
            state = true;
        }

        function sub() {
            state = false;
        }
        return {
            getState: function() {
                return state;
            },
            switcher: function() {
                state ? state = false : state = true;
            }
        }
    })()
    window.addEventListener('scroll', lazyLoader)

    function lazyLoader() {
        //  console.log(lazyLoad)
        //  var distance=distanceToTop(details);
        //  console.log('scrolling',window.pageYOffset-distance)
        lazyLoad.forEach(function(element, index) {
            var elementHeight = element.scrollHeight;
            var distance = distanceToTop(element);

            if (window.innerHeight - element.scrollHeight < window.pageYOffset - distance) {
                element.classList.add("opacity")
            }
            if (distance > window.innerHeight - elementHeight / 2 || elementHeight == 0) {

                element.classList.remove("opacity");

                //removeCssClass(element, 'opacity')

            }

        })



    }


    function scrollIt(destination) {

        var stateID;
        return function() {

            var state = detailsState.getState();
            console.log('state before click', state)
            if (!state) {
                details.className = "details display";
                showDetails.innerHTML = "hide"
                doc.body.style.overflow = "hidden";
                detailsState.switcher()
                console.log('state after click ', state)
            } else if (state) {

                //details.className = "details";
                doc.body.style.overflow = "hidden";
                showDetails.innerHTML = "learn more"
                detailsState.switcher()
                console.log('state return ', state)
            }
            /*always reset previous Interval*/
            clearInterval(stateID);
            setTimeout(function() {
                stateID = setInterval(scrollIncrement, 5);
            }, 500)


            function scrollIncrement() {
                /*
                FireFox and Internet Explorer use 'var html' height
                Chrome,Safari use 'var body' height
                startPoint + window.innerHeight === document.body.scrollHeight -> if true - bottom of document
                percentage ->quantity of scrolled %
                increment ->relative to percentage
                Math.ceil - round to biger number, if we go Down
                MAth.floor - round to less number, if we go Up
                */
                /*scrolltop scrollheight*/

                var html = document.documentElement,
                    body = document.body,
                    startPoint = window.pageYOffset || body.scrollTop || html.scrollTop,
                    toTop = distanceToTop(destination),
                    endPoint = Math.abs(toTop),
                    direction = toTop / endPoint,
                    bottom = endPoint + window.pageYOffset,
                    percentage = startPoint / ((bottom / 100)),
                    calculateStep = direction * (50 - ((50 / 100) * (percentage))),
                    increment;
                console.log('toTop', direction)

                direction > 0 ? increment = Math.ceil(calculateStep) : increment = Math.floor(calculateStep)
                if (endPoint != 1) {
                    var newY = startPoint + increment;
                    window.scrollTo(0, newY);
                } else {
                    if (direction < 0) {
                        console.log('direction less then 0, direction UP')
                        details.className = "details";
                    }
                    console.log('direction', direction)

                    clearInterval(stateID);
                    opacity_switch = true;
                    doc.body.style.overflow = "auto";



                    lazyLoader()
                }

            } //scrollIncrement
        }

    }






    function Slider(slides) {
        this.slides = toArrayByClassName(slides);
        this.slidesVideoImg = toArrayByClassName('img-bind');
        this.indexArray = ['0%', '100%', '200%', '300%'];
        this.currentSlide = 1;
        this.changeSlides();

    }

    Slider.prototype.changeSlides = function() {
        this.transitionEvent && this.slides[0].addEventListener(this.transitionEvent, this.transitionLogic);


        this.slidesVideoImg.forEach(function(element) {
            element.style.opacity = 0;
        })
        this.slidesVideoImg[this.currentSlide].style.opacity = "1";
    }
    Slider.prototype.getCurrentSlideIndex = function() {
        return this.currentSlide;
    }
    Slider.prototype.incrementSlideIndex = function(increment) {

        this.currentSlide += increment;
        this.currentSlide > this.slides.length - 1 ? this.currentSlide = 0 : false;
        this.currentSlide < 0 ? this.currentSlide = this.slides.length - 1 : false;

        this.slides.forEach(function(element) {
            var attr = parseInt(element.getAttribute('data-index'));
            attr += increment;
            attr > 3 ? attr = 0 : false;
            attr < 0 ? attr = 3 : false;

            element.setAttribute('data-index', attr);
        })
    }
    Slider.prototype.animatedSlide = function(dataIndex) {
        var app = this;
        this.slides.forEach(function(element, index) {

            var computed = getComputedStyle(element)
            var data_index = parseInt(element.getAttribute('data-index'));

            if (data_index == dataIndex) {

                element.style.zIndex = "-1";
            }
            element.style.left = app.indexArray[data_index];
        })
    }

    Slider.prototype.transitionEvent = function() {


        this.transitionEvent = (function() {
            var t;
            var el = slides[0]
            var transitions = {
                'transition': 'transitionend',
                'OTransition': 'oTransitionEnd',
                'MozTransition': 'transitionend',
                'WebkitTransition': 'webkitTransitionEnd'
            }

            for (t in transitions) {
                if (el.style[t] !== undefined) {
                    return transitions[t];
                }
            }
        })()
        return this.transitionEvent;
    }
    Slider.prototype.transitionLogic = function() {

        var app = this;
        app.slides.forEach(function(element, index) {
            var data_index = parseInt(element.getAttribute('data-index'));
            if (data_index == 0) {

                var computed = getComputedStyle(element)
                if (computed.left == '0px') {

                    element.style.zIndex = "1";
                }
            }
            if (data_index == app.slides.length - 1) {

                element.style.zIndex = "1";

            }
        })

    }
    Slider.prototype.move = function(increment, dataIndex, binded) {


        var app = this;

        return function() {
            app.transitionLogic()
            app.incrementSlideIndex(increment);
            binded ? app.changeSlides() : false;

            app.animatedSlide(dataIndex)
        }
    }
    var app = new Slider('img-1')


    prev.addEventListener('click', app.move(1, 0, true));
    next.addEventListener('click', app.move(-1, 3, true))


    var app2 = new Slider('img-2');


    prev2.addEventListener('click', app2.move(1, 0, false));
    next2.addEventListener('click', app2.move(-1, 3, false))


    slider_video.addEventListener('click', function(e) {
        var loadScript = (function() {
            var tag = document.createElement('script');
            tag.src = "https://www.youtube.com/player_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        })()
        if (player) {
            player.loadVideoById({
                'videoId': films[app.getCurrentSlideIndex()]
            });
            player.playVideo();
            video_container.className = "video-container show";
        }
    })
    window.onYouTubePlayerAPIReady = function() {

        player = new YT.Player('player', {
            height: '1000',
            width: '1000',
            playerVars: {
                'controls': 0,
                'rel': 0,
                'modestbranding': 0,
                'autoplay': 1,
                'enablejsapi': 1

            },
            events: {
                'onReady': onReady,
                'onStateChange': closeVideo
            }

        });

        function onReady(e) {

            player.loadVideoById({
                'videoId': films[app.getCurrentSlideIndex()]
            });
            //  player.playVideo()
            setTimeout(function() {
                video_container.className = "video-container show";
            }, 500)

        }

        function closeVideo(e) {

            if (e.data == 2 || e.data == 0) {
                video_container.className = "video-container";
                player.stopVideo();
                return;
            }
        }
    }



})() //global IIF


;
(function() {

    function toArrayByClassName(nodes) {
        return [].slice.call(document.getElementsByClassName(nodes))
    }
    var doc = document,
        //toArrayByClassName = nodes => [].slice.call(doc.getElementsByClassName(nodes)),
        header = doc.getElementById('header'),
        prev = doc.getElementById('prev'),
        next = doc.getElementById('next'),
        navItem = toArrayByClassName('nav-item'),
        dropdownContainer = toArrayByClassName('dropdown-container'),
        dropdownMenu = toArrayByClassName('dropdown-menu'),
        parallaxItem = toArrayByClassName('anim-item-1'),
        animatedBlocks = toArrayByClassName('anim-item-2'),
        animatedBlocks3 = toArrayByClassName('anim-item-3'),
        slides = toArrayByClassName('slide');



    /**
     *@param {object} settings, properties: prev/next(button objects), slides (slide, usually 'LI' element)
     */
    var slider = (function(settings) {

        /*private method*/
        var currentIndex = 0,
            slideIndex = 1,
            slideClick,
            /*closure*/
            wrapper = n => slideClick = () => slideRender(slideIndex += n);
        settings.prev.addEventListener('click', wrapper(-1));
        settings.next.addEventListener('click', wrapper(1));
        /*private method*/
        function slideRender(n) {
            var i,
                slides = settings.slides;

            n > slides.length ? slideIndex = 1 : false;
            n < 1 ? slideIndex = slides.length : false;

            slides.forEach(function(element, index) {
                element.style.display = "none";
                index == slideIndex - 1 ? element.style.opacity = "0" : false;
            });
            slides[slideIndex - 1].style.display = "block";
            setTimeout(function() {
                slides[slideIndex - 1].style.opacity = "1";
            }, 0)

        }
        slideRender(slideIndex);
        return {
            wrapper: wrapper,
            slideRender: slideRender
        }
    })({
        prev: prev,
        next: next,
        slides: slides
    });




    window.addEventListener('resize', function(e) {
        function transitionNone(element) {
            element.style.transition = "none";
        }
        var mix = parallaxItem.concat(animatedBlocks, animatedBlocks3 /*, navItem*/ );
        mix.forEach(transitionNone);
    });
    window.addEventListener('load', function(e) {
        parallaxItem.forEach(function(element) {
            element.style.transition = "all 1s ease";
        })
        setTimeout(function() {
            window.scrollTo(0, 0);
        });
    });

    doc.addEventListener("scroll", function(e) {
        var run = new Promise(
            function(res, rej) {
                var pageYOffset = window.pageYOffset;
                if (e) {
                    if (pageYOffset < 10) {
                        header.className = "";
                    }
                    if (pageYOffset > 100) {
                        header.className = "scrolled";
                        parallaxItem.forEach(function(element, index) {
                            element.className = "anim-item-1 item-" + (index + 1);
                        });
                    }
                    if (pageYOffset > 400) {
                        animatedBlocks.forEach(function(element, index) {
                            element.className = "anim-item-2 item-" + (index + 5);
                        })
                    }
                    if (pageYOffset > 600) {
                        animatedBlocks3.forEach(function(element, index) {
                            element.className = "anim-item-3 item-" + (index + 8);
                        })
                    }

                    res('done')
                } else {
                    rej('cancel')
                }
            }
        );
        run.then(function(result) {

        })
    });
})

app.factory('swearing',function(){
  return ['ass','fuck','asshole','kurwa']
})

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})

;
(function() {
    function toArrayByClassName(nodes) {
        return [].slice.call(document.getElementsByClassName(nodes))
    }

    function distanceToTop(element) {
        return parseInt(element.offsetTop - window.pageYOffset);
    }



    /*cross browser addClass*/


    var doc = document,
        //toArrayByClassName = nodes => [].slice.call(doc.getElementsByClassName(nodes)),
        prev = doc.getElementById('prev'),
        next = doc.getElementById('next'),
        prev2 = doc.getElementById('prev-2'),
        next2 = doc.getElementById('next-2'),
        //slides = toArrayByClassName('img'),
        slider_video = doc.getElementById('slider-video'),
        slides_video_img = toArrayByClassName('img-bind'),
        video_container = doc.getElementById('video-container'),
        films = ['lqzJqeeOAlQ', '2JOoto47aLE', 'ILek6YF1iac', 'lqzJqeeOAlQ'],
        player,
        details = doc.getElementById('details'),
        showDetails = doc.getElementById('show-details'),
        hideDetails = doc.getElementById('hide-details'),
        opacity_switch = false,
        lazyLoad = toArrayByClassName('lazy'),
        wrapper = doc.getElementById('wrapper');




    var Logos = (function(settings) {
        var zero = new Array(14).fill(),
        logosImgItem = toArrayByClassName(settings.imgCssClass),
         invoke,
         stop;
        var getRandomRange = function(min, max) {

            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min;

        }
        var imgSet = zero.map(function(element, index) {
            return element = index;
        })

        logosImgItem.forEach(function(element, index) {
            element.src = `./img/logos/logo-${imgSet[index]}.jpg`;
        })

        var draft = imgSet.splice(logosImgItem.length)
        var animation = function() {

            var random = getRandomRange(0, logosImgItem.length - 1);
            logosImgItem.forEach(function(element) {
                element.className = "logos__img";
            })
            logosImgItem.forEach(function(element, index) {
                if (random == index) {
                    element.classList.toggle("hide");
                    setTimeout(function() {
                        var newImg = draft.shift();
                        draft.push(imgSet[index])
                        imgSet[index] = newImg;
                        element.src = `./img/logos/logo-${newImg}.jpg`;
                    }, 1500)
                }
            })
        }

        return {
            invoke: function() {
                invoke = setInterval(animation, 4000);
            },
            stop: function() {
                stop = clearInterval(invoke)

            }
        }
    })({imgCssClass:"logos__img"})
    Logos.invoke()









    showDetails.addEventListener('click', scrollIt(details))
    hideDetails.addEventListener('click', scrollIt(wrapper))

    var detailsState = (function() {
        var state = false;

        function add() {
            state = true;
        }

        function sub() {
            state = false;
        }
        return {
            getState: function() {
                return state;
            },
            switcher: function() {
                state ? state = false : state = true;
            }
        }
    })()
    window.addEventListener('scroll', lazyLoader)

    function lazyLoader() {
        //  console.log(lazyLoad)
        //  var distance=distanceToTop(details);
        //  console.log('scrolling',window.pageYOffset-distance)
        lazyLoad.forEach(function(element, index) {
            var elementHeight = element.scrollHeight;
            var distance = distanceToTop(element);

            if (window.innerHeight - element.scrollHeight < window.pageYOffset - distance) {
                element.classList.add("opacity")
            }
            if (distance > window.innerHeight - elementHeight / 2 || elementHeight == 0) {

                element.classList.remove("opacity");

                //removeCssClass(element, 'opacity')

            }

        })



    }


    function scrollIt(destination) {

        var stateID;
        return function() {

            var state = detailsState.getState();
            console.log('state before click', state)
            if (!state) {
                details.className = "details display";
                showDetails.innerHTML = "hide"
                doc.body.style.overflow = "hidden";
                detailsState.switcher()
                console.log('state after click ', state)
            } else if (state) {

                //details.className = "details";
                doc.body.style.overflow = "hidden";
                showDetails.innerHTML = "learn more"
                detailsState.switcher()
                console.log('state return ', state)
            }
            /*always reset previous Interval*/
            clearInterval(stateID);
            setTimeout(function() {
                stateID = setInterval(scrollIncrement, 5);
            }, 500)


            function scrollIncrement() {
                /*
                FireFox and Internet Explorer use 'var html' height
                Chrome,Safari use 'var body' height
                startPoint + window.innerHeight === document.body.scrollHeight -> if true - bottom of document
                percentage ->quantity of scrolled %
                increment ->relative to percentage
                Math.ceil - round to biger number, if we go Down
                MAth.floor - round to less number, if we go Up
                */
                /*scrolltop scrollheight*/

                var html = document.documentElement,
                    body = document.body,
                    startPoint = window.pageYOffset || body.scrollTop || html.scrollTop,
                    toTop = distanceToTop(destination),
                    endPoint = Math.abs(toTop),
                    direction = toTop / endPoint,
                    bottom = endPoint + window.pageYOffset,
                    percentage = startPoint / ((bottom / 100)),
                    calculateStep = direction * (50 - ((50 / 100) * (percentage))),
                    increment;
                console.log('toTop', direction)

                direction > 0 ? increment = Math.ceil(calculateStep) : increment = Math.floor(calculateStep)
                if (endPoint != 1) {
                    var newY = startPoint + increment;
                    window.scrollTo(0, newY);
                } else {
                    if (direction < 0) {
                        console.log('direction less then 0, direction UP')
                        details.className = "details";
                    }
                    console.log('direction', direction)

                    clearInterval(stateID);
                    opacity_switch = true;
                    doc.body.style.overflow = "auto";



                    lazyLoader()
                }

            } //scrollIncrement
        }

    }






    function Slider(slides) {
        this.slides = toArrayByClassName(slides);
        this.slidesVideoImg = toArrayByClassName('img-bind');
        this.indexArray = ['0%', '100%', '200%', '300%'];
        this.currentSlide = 1;
        this.changeSlides();

    }

    Slider.prototype.changeSlides = function() {
        this.transitionEvent && this.slides[0].addEventListener(this.transitionEvent, this.transitionLogic);


        this.slidesVideoImg.forEach(function(element) {
            element.style.opacity = 0;
        })
        this.slidesVideoImg[this.currentSlide].style.opacity = "1";
    }
    Slider.prototype.getCurrentSlideIndex = function() {
        return this.currentSlide;
    }
    Slider.prototype.incrementSlideIndex = function(increment) {

        this.currentSlide += increment;
        this.currentSlide > this.slides.length - 1 ? this.currentSlide = 0 : false;
        this.currentSlide < 0 ? this.currentSlide = this.slides.length - 1 : false;

        this.slides.forEach(function(element) {
            var attr = parseInt(element.getAttribute('data-index'));
            attr += increment;
            attr > 3 ? attr = 0 : false;
            attr < 0 ? attr = 3 : false;

            element.setAttribute('data-index', attr);
        })
    }
    Slider.prototype.animatedSlide = function(dataIndex) {
        var app = this;
        this.slides.forEach(function(element, index) {

            var computed = getComputedStyle(element)
            var data_index = parseInt(element.getAttribute('data-index'));

            if (data_index == dataIndex) {

                element.style.zIndex = "-1";
            }
            element.style.left = app.indexArray[data_index];
        })
    }

    Slider.prototype.transitionEvent = function() {


        this.transitionEvent = (function() {
            var t;
            var el = slides[0]
            var transitions = {
                'transition': 'transitionend',
                'OTransition': 'oTransitionEnd',
                'MozTransition': 'transitionend',
                'WebkitTransition': 'webkitTransitionEnd'
            }

            for (t in transitions) {
                if (el.style[t] !== undefined) {
                    return transitions[t];
                }
            }
        })()
        return this.transitionEvent;
    }
    Slider.prototype.transitionLogic = function() {

        var app = this;
        app.slides.forEach(function(element, index) {
            var data_index = parseInt(element.getAttribute('data-index'));
            if (data_index == 0) {

                var computed = getComputedStyle(element)
                if (computed.left == '0px') {

                    element.style.zIndex = "1";
                }
            }
            if (data_index == app.slides.length - 1) {

                element.style.zIndex = "1";

            }
        })

    }
    Slider.prototype.move = function(increment, dataIndex, binded) {


        var app = this;

        return function() {
            app.transitionLogic()
            app.incrementSlideIndex(increment);
            binded ? app.changeSlides() : false;

            app.animatedSlide(dataIndex)
        }
    }
    var app = new Slider('img-1')


    prev.addEventListener('click', app.move(1, 0, true));
    next.addEventListener('click', app.move(-1, 3, true))


    var app2 = new Slider('img-2');


    prev2.addEventListener('click', app2.move(1, 0, false));
    next2.addEventListener('click', app2.move(-1, 3, false))


    slider_video.addEventListener('click', function(e) {
        var loadScript = (function() {
            var tag = document.createElement('script');
            tag.src = "https://www.youtube.com/player_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        })()
        if (player) {
            player.loadVideoById({
                'videoId': films[app.getCurrentSlideIndex()]
            });
            player.playVideo();
            video_container.className = "video-container show";
        }
    })
    window.onYouTubePlayerAPIReady = function() {

        player = new YT.Player('player', {
            height: '1000',
            width: '1000',
            playerVars: {
                'controls': 0,
                'rel': 0,
                'modestbranding': 0,
                'autoplay': 1,
                'enablejsapi': 1

            },
            events: {
                'onReady': onReady,
                'onStateChange': closeVideo
            }

        });

        function onReady(e) {

            player.loadVideoById({
                'videoId': films[app.getCurrentSlideIndex()]
            });
            //  player.playVideo()
            setTimeout(function() {
                video_container.className = "video-container show";
            }, 500)

        }

        function closeVideo(e) {

            if (e.data == 2 || e.data == 0) {
                video_container.className = "video-container";
                player.stopVideo();
                return;
            }
        }
    }



})() //global IIF


;
(function() {

    function toArrayByClassName(nodes) {
        return [].slice.call(document.getElementsByClassName(nodes))
    }
    var doc = document,
        //toArrayByClassName = nodes => [].slice.call(doc.getElementsByClassName(nodes)),
        header = doc.getElementById('header'),
        prev = doc.getElementById('prev'),
        next = doc.getElementById('next'),
        navItem = toArrayByClassName('nav-item'),
        dropdownContainer = toArrayByClassName('dropdown-container'),
        dropdownMenu = toArrayByClassName('dropdown-menu'),
        parallaxItem = toArrayByClassName('anim-item-1'),
        animatedBlocks = toArrayByClassName('anim-item-2'),
        animatedBlocks3 = toArrayByClassName('anim-item-3'),
        slides = toArrayByClassName('slide');



    /**
     *@param {object} settings, properties: prev/next(button objects), slides (slide, usually 'LI' element)
     */
    var slider = (function(settings) {

        /*private method*/
        var currentIndex = 0,
            slideIndex = 1,
            slideClick,
            /*closure*/
            wrapper = n => slideClick = () => slideRender(slideIndex += n);
        settings.prev.addEventListener('click', wrapper(-1));
        settings.next.addEventListener('click', wrapper(1));
        /*private method*/
        function slideRender(n) {
            var i,
                slides = settings.slides;

            n > slides.length ? slideIndex = 1 : false;
            n < 1 ? slideIndex = slides.length : false;

            slides.forEach(function(element, index) {
                element.style.display = "none";
                index == slideIndex - 1 ? element.style.opacity = "0" : false;
            });
            slides[slideIndex - 1].style.display = "block";
            setTimeout(function() {
                slides[slideIndex - 1].style.opacity = "1";
            }, 0)

        }
        slideRender(slideIndex);
        return {
            wrapper: wrapper,
            slideRender: slideRender
        }
    })({
        prev: prev,
        next: next,
        slides: slides
    });




    window.addEventListener('resize', function(e) {
        function transitionNone(element) {
            element.style.transition = "none";
        }
        var mix = parallaxItem.concat(animatedBlocks, animatedBlocks3 /*, navItem*/ );
        mix.forEach(transitionNone);
    });
    window.addEventListener('load', function(e) {
        parallaxItem.forEach(function(element) {
            element.style.transition = "all 1s ease";
        })
        setTimeout(function() {
            window.scrollTo(0, 0);
        });
    });

    doc.addEventListener("scroll", function(e) {
        var run = new Promise(
            function(res, rej) {
                var pageYOffset = window.pageYOffset;
                if (e) {
                    if (pageYOffset < 10) {
                        header.className = "";
                    }
                    if (pageYOffset > 100) {
                        header.className = "scrolled";
                        parallaxItem.forEach(function(element, index) {
                            element.className = "anim-item-1 item-" + (index + 1);
                        });
                    }
                    if (pageYOffset > 400) {
                        animatedBlocks.forEach(function(element, index) {
                            element.className = "anim-item-2 item-" + (index + 5);
                        })
                    }
                    if (pageYOffset > 600) {
                        animatedBlocks3.forEach(function(element, index) {
                            element.className = "anim-item-3 item-" + (index + 8);
                        })
                    }

                    res('done')
                } else {
                    rej('cancel')
                }
            }
        );
        run.then(function(result) {

        })
    });
})

app.factory('swearing',function(){
  return ['ass','fuck','asshole','kurwa']
})

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})

;
(function() {
    function toArrayByClassName(nodes) {
        return [].slice.call(document.getElementsByClassName(nodes))
    }

    function distanceToTop(element) {
        return parseInt(element.offsetTop - window.pageYOffset);
    }



    /*cross browser addClass*/


    var doc = document,
        //toArrayByClassName = nodes => [].slice.call(doc.getElementsByClassName(nodes)),
        prev = doc.getElementById('prev'),
        next = doc.getElementById('next'),
        prev2 = doc.getElementById('prev-2'),
        next2 = doc.getElementById('next-2'),
        //slides = toArrayByClassName('img'),
        slider_video = doc.getElementById('slider-video'),
        slides_video_img = toArrayByClassName('img-bind'),
        video_container = doc.getElementById('video-container'),
        films = ['lqzJqeeOAlQ', '2JOoto47aLE', 'ILek6YF1iac', 'lqzJqeeOAlQ'],
        player,
        details = doc.getElementById('details'),
        showDetails = doc.getElementById('show-details'),
        hideDetails = doc.getElementById('hide-details'),
        opacity_switch = false,
        lazyLoad = toArrayByClassName('lazy'),
        wrapper = doc.getElementById('wrapper');




    var Logos = (function(settings) {
        var zero = new Array(14).fill(),
        logosImgItem = toArrayByClassName(settings.imgCssClass),
         invoke,
         stop;
        var getRandomRange = function(min, max) {

            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min;

        }
        var imgSet = zero.map(function(element, index) {
            return element = index;
        })

        logosImgItem.forEach(function(element, index) {
            element.src = `./img/logos/logo-${imgSet[index]}.jpg`;
        })

        var draft = imgSet.splice(logosImgItem.length)
        var animation = function() {

            var random = getRandomRange(0, logosImgItem.length - 1);
            logosImgItem.forEach(function(element) {
                element.className = "logos__img";
            })
            logosImgItem.forEach(function(element, index) {
                if (random == index) {
                    element.classList.toggle("hide");
                    setTimeout(function() {
                        var newImg = draft.shift();
                        draft.push(imgSet[index])
                        imgSet[index] = newImg;
                        element.src = `./img/logos/logo-${newImg}.jpg`;
                    }, 1500)
                }
            })
        }

        return {
            invoke: function() {
                invoke = setInterval(animation, 4000);
            },
            stop: function() {
                stop = clearInterval(invoke)

            }
        }
    })({imgCssClass:"logos__img"})
    Logos.invoke()









    showDetails.addEventListener('click', scrollIt(details))
    hideDetails.addEventListener('click', scrollIt(wrapper))

    var detailsState = (function() {
        var state = false;

        function add() {
            state = true;
        }

        function sub() {
            state = false;
        }
        return {
            getState: function() {
                return state;
            },
            switcher: function() {
                state ? state = false : state = true;
            }
        }
    })()
    window.addEventListener('scroll', lazyLoader)

    function lazyLoader() {
        //  console.log(lazyLoad)
        //  var distance=distanceToTop(details);
        //  console.log('scrolling',window.pageYOffset-distance)
        lazyLoad.forEach(function(element, index) {
            var elementHeight = element.scrollHeight;
            var distance = distanceToTop(element);

            if (window.innerHeight - element.scrollHeight < window.pageYOffset - distance) {
                element.classList.add("opacity")
            }
            if (distance > window.innerHeight - elementHeight / 2 || elementHeight == 0) {

                element.classList.remove("opacity");

                //removeCssClass(element, 'opacity')

            }

        })



    }


    function scrollIt(destination) {

        var stateID;
        return function() {

            var state = detailsState.getState();
            console.log('state before click', state)
            if (!state) {
                details.className = "details display";
                showDetails.innerHTML = "hide"
                doc.body.style.overflow = "hidden";
                detailsState.switcher()
                console.log('state after click ', state)
            } else if (state) {

                //details.className = "details";
                doc.body.style.overflow = "hidden";
                showDetails.innerHTML = "learn more"
                detailsState.switcher()
                console.log('state return ', state)
            }
            /*always reset previous Interval*/
            clearInterval(stateID);
            setTimeout(function() {
                stateID = setInterval(scrollIncrement, 5);
            }, 500)


            function scrollIncrement() {
                /*
                FireFox and Internet Explorer use 'var html' height
                Chrome,Safari use 'var body' height
                startPoint + window.innerHeight === document.body.scrollHeight -> if true - bottom of document
                percentage ->quantity of scrolled %
                increment ->relative to percentage
                Math.ceil - round to biger number, if we go Down
                MAth.floor - round to less number, if we go Up
                */
                /*scrolltop scrollheight*/

                var html = document.documentElement,
                    body = document.body,
                    startPoint = window.pageYOffset || body.scrollTop || html.scrollTop,
                    toTop = distanceToTop(destination),
                    endPoint = Math.abs(toTop),
                    direction = toTop / endPoint,
                    bottom = endPoint + window.pageYOffset,
                    percentage = startPoint / ((bottom / 100)),
                    calculateStep = direction * (50 - ((50 / 100) * (percentage))),
                    increment;
                console.log('toTop', direction)

                direction > 0 ? increment = Math.ceil(calculateStep) : increment = Math.floor(calculateStep)
                if (endPoint != 1) {
                    var newY = startPoint + increment;
                    window.scrollTo(0, newY);
                } else {
                    if (direction < 0) {
                        console.log('direction less then 0, direction UP')
                        details.className = "details";
                    }
                    console.log('direction', direction)

                    clearInterval(stateID);
                    opacity_switch = true;
                    doc.body.style.overflow = "auto";



                    lazyLoader()
                }

            } //scrollIncrement
        }

    }






    function Slider(slides) {
        this.slides = toArrayByClassName(slides);
        this.slidesVideoImg = toArrayByClassName('img-bind');
        this.indexArray = ['0%', '100%', '200%', '300%'];
        this.currentSlide = 1;
        this.changeSlides();

    }

    Slider.prototype.changeSlides = function() {
        this.transitionEvent && this.slides[0].addEventListener(this.transitionEvent, this.transitionLogic);


        this.slidesVideoImg.forEach(function(element) {
            element.style.opacity = 0;
        })
        this.slidesVideoImg[this.currentSlide].style.opacity = "1";
    }
    Slider.prototype.getCurrentSlideIndex = function() {
        return this.currentSlide;
    }
    Slider.prototype.incrementSlideIndex = function(increment) {

        this.currentSlide += increment;
        this.currentSlide > this.slides.length - 1 ? this.currentSlide = 0 : false;
        this.currentSlide < 0 ? this.currentSlide = this.slides.length - 1 : false;

        this.slides.forEach(function(element) {
            var attr = parseInt(element.getAttribute('data-index'));
            attr += increment;
            attr > 3 ? attr = 0 : false;
            attr < 0 ? attr = 3 : false;

            element.setAttribute('data-index', attr);
        })
    }
    Slider.prototype.animatedSlide = function(dataIndex) {
        var app = this;
        this.slides.forEach(function(element, index) {

            var computed = getComputedStyle(element)
            var data_index = parseInt(element.getAttribute('data-index'));

            if (data_index == dataIndex) {

                element.style.zIndex = "-1";
            }
            element.style.left = app.indexArray[data_index];
        })
    }

    Slider.prototype.transitionEvent = function() {


        this.transitionEvent = (function() {
            var t;
            var el = slides[0]
            var transitions = {
                'transition': 'transitionend',
                'OTransition': 'oTransitionEnd',
                'MozTransition': 'transitionend',
                'WebkitTransition': 'webkitTransitionEnd'
            }

            for (t in transitions) {
                if (el.style[t] !== undefined) {
                    return transitions[t];
                }
            }
        })()
        return this.transitionEvent;
    }
    Slider.prototype.transitionLogic = function() {

        var app = this;
        app.slides.forEach(function(element, index) {
            var data_index = parseInt(element.getAttribute('data-index'));
            if (data_index == 0) {

                var computed = getComputedStyle(element)
                if (computed.left == '0px') {

                    element.style.zIndex = "1";
                }
            }
            if (data_index == app.slides.length - 1) {

                element.style.zIndex = "1";

            }
        })

    }
    Slider.prototype.move = function(increment, dataIndex, binded) {


        var app = this;

        return function() {
            app.transitionLogic()
            app.incrementSlideIndex(increment);
            binded ? app.changeSlides() : false;

            app.animatedSlide(dataIndex)
        }
    }
    var app = new Slider('img-1')


    prev.addEventListener('click', app.move(1, 0, true));
    next.addEventListener('click', app.move(-1, 3, true))


    var app2 = new Slider('img-2');


    prev2.addEventListener('click', app2.move(1, 0, false));
    next2.addEventListener('click', app2.move(-1, 3, false))


    slider_video.addEventListener('click', function(e) {
        var loadScript = (function() {
            var tag = document.createElement('script');
            tag.src = "https://www.youtube.com/player_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        })()
        if (player) {
            player.loadVideoById({
                'videoId': films[app.getCurrentSlideIndex()]
            });
            player.playVideo();
            video_container.className = "video-container show";
        }
    })
    window.onYouTubePlayerAPIReady = function() {

        player = new YT.Player('player', {
            height: '1000',
            width: '1000',
            playerVars: {
                'controls': 0,
                'rel': 0,
                'modestbranding': 0,
                'autoplay': 1,
                'enablejsapi': 1

            },
            events: {
                'onReady': onReady,
                'onStateChange': closeVideo
            }

        });

        function onReady(e) {

            player.loadVideoById({
                'videoId': films[app.getCurrentSlideIndex()]
            });
            //  player.playVideo()
            setTimeout(function() {
                video_container.className = "video-container show";
            }, 500)

        }

        function closeVideo(e) {

            if (e.data == 2 || e.data == 0) {
                video_container.className = "video-container";
                player.stopVideo();
                return;
            }
        }
    }



})() //global IIF


;
(function() {

    function toArrayByClassName(nodes) {
        return [].slice.call(document.getElementsByClassName(nodes))
    }
    var doc = document,
        //toArrayByClassName = nodes => [].slice.call(doc.getElementsByClassName(nodes)),
        header = doc.getElementById('header'),
        prev = doc.getElementById('prev'),
        next = doc.getElementById('next'),
        navItem = toArrayByClassName('nav-item'),
        dropdownContainer = toArrayByClassName('dropdown-container'),
        dropdownMenu = toArrayByClassName('dropdown-menu'),
        parallaxItem = toArrayByClassName('anim-item-1'),
        animatedBlocks = toArrayByClassName('anim-item-2'),
        animatedBlocks3 = toArrayByClassName('anim-item-3'),
        slides = toArrayByClassName('slide');



    /**
     *@param {object} settings, properties: prev/next(button objects), slides (slide, usually 'LI' element)
     */
    var slider = (function(settings) {

        /*private method*/
        var currentIndex = 0,
            slideIndex = 1,
            slideClick,
            /*closure*/
            wrapper = n => slideClick = () => slideRender(slideIndex += n);
        settings.prev.addEventListener('click', wrapper(-1));
        settings.next.addEventListener('click', wrapper(1));
        /*private method*/
        function slideRender(n) {
            var i,
                slides = settings.slides;

            n > slides.length ? slideIndex = 1 : false;
            n < 1 ? slideIndex = slides.length : false;

            slides.forEach(function(element, index) {
                element.style.display = "none";
                index == slideIndex - 1 ? element.style.opacity = "0" : false;
            });
            slides[slideIndex - 1].style.display = "block";
            setTimeout(function() {
                slides[slideIndex - 1].style.opacity = "1";
            }, 0)

        }
        slideRender(slideIndex);
        return {
            wrapper: wrapper,
            slideRender: slideRender
        }
    })({
        prev: prev,
        next: next,
        slides: slides
    });




    window.addEventListener('resize', function(e) {
        function transitionNone(element) {
            element.style.transition = "none";
        }
        var mix = parallaxItem.concat(animatedBlocks, animatedBlocks3 /*, navItem*/ );
        mix.forEach(transitionNone);
    });
    window.addEventListener('load', function(e) {
        parallaxItem.forEach(function(element) {
            element.style.transition = "all 1s ease";
        })
        setTimeout(function() {
            window.scrollTo(0, 0);
        });
    });

    doc.addEventListener("scroll", function(e) {
        var run = new Promise(
            function(res, rej) {
                var pageYOffset = window.pageYOffset;
                if (e) {
                    if (pageYOffset < 10) {
                        header.className = "";
                    }
                    if (pageYOffset > 100) {
                        header.className = "scrolled";
                        parallaxItem.forEach(function(element, index) {
                            element.className = "anim-item-1 item-" + (index + 1);
                        });
                    }
                    if (pageYOffset > 400) {
                        animatedBlocks.forEach(function(element, index) {
                            element.className = "anim-item-2 item-" + (index + 5);
                        })
                    }
                    if (pageYOffset > 600) {
                        animatedBlocks3.forEach(function(element, index) {
                            element.className = "anim-item-3 item-" + (index + 8);
                        })
                    }

                    res('done')
                } else {
                    rej('cancel')
                }
            }
        );
        run.then(function(result) {

        })
    });
})

app.factory('swearing',function(){
  return ['ass','fuck','asshole','kurwa']
})

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})

'use strict';
var app = angular.module('app',[]).filter('htmlToText', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  }
);

'use strict';
app.controller('ctrl', function ctrl($scope, $http, $log, AppData) {
    $scope.test = 'Hello!';
    $scope.myService = AppData.settings;
    $scope.switch = false;
    $scope.wait = false;
    $scope.myArray = [];
    $scope.myValue = "java";
    /**
    *@param {i} page number, special fo Goodreads api
    * this function recursively ask about first 8 pages number and load it
    */
    $scope.getData = function(i) {
        if (i < 9) {
            $http.post("http://localhost:8081/hello", {
                name: $scope.myValue,
                page: i
            }).then(function(response) {
                if (i == 1) {
                    $scope.myArray.length = 0;
                    /*reset myWelcome array*/
                    $scope.myWelcome = "";
                    $scope.myWelcome = angular.fromJson(response.data);
                    $scope.myArray.push(angular.fromJson(response.data))
                }
                $scope.myArray.push(angular.fromJson(response.data))
                return response ? $scope.getData(i + 1) : 'hello';
            })
        } else {
            return 'end'
        }
    }

})

'use strict';
app.controller('manager', function manager($scope, $http, $log) {
    $scope.manager = "Manager test";

    $scope.load = function() {
        $http({
            url: 'http://localhost:8081/home/manager/load/comments',
            method: 'GET'
        }).then(function(res) {
            $log.log(res)
            $scope.comments = res.data.data;

            //access returned res here

        }, function(error) {
            //handle error here
        });
    }
    $scope.update = function(id, checked) {
        checked == 0 || checked == 3 ? index = 1 : index = 0;
        $http.post('http://localhost:8081/home/manager/update/comment/' + id, {
            index: index
        }).then(function(response) {
            $scope.load()
        })


    }

})

'use strict';
app.controller('search', function search($scope, $http, $log) {
    $scope.test = "Hello Angular!"
    $scope.books = [];
    $scope.page = 0;
    $scope.dataLength = 0;
    $scope.showNext = false;
    $scope.showPrev = false;
    $scope.pageQuantity = 0;
    $scope.nextPage = function(items) {
        $scope.page = $scope.page + items;

        if ($scope.page > 0 && $scope.page + 10 < $scope.dataLength) {
            $scope.showPrev = true;
            $scope.showNext = true;
        } else if ($scope.page == 0) {
            $scope.showPrev = false;
            $scope.showNext = true;
        } else if ($scope.page + 10 > $scope.dataLength) {
            $log.log('more')
            $scope.showNext = false;
        }

    }
    /**
     *@param {name} send this parametr to routing /home as req.body.name
     *next,result is pushed to {books[]}
     *which is rendered in views/home.pug
     */
    $scope.loadBooks = function() {

        $http.post("http://localhost:8081/home/loadData", {
            name: $scope.userBook
        }).then(function(response) {
            $scope.page = 0;
            $scope.books = [];

            $scope.books.push(response.data);
            $scope.showNext = true;
            $scope.dataLength = response.data.length;
            $scope.pageQuantity = response.data.length / 10;
            $log.log($scope.books[0])
        });
    /*    $http.post("http://localhost:8081/home/compare", {
name:'12'
        }).then(function(response) {

            $log.log(response)

        });
        */


    }

});

'use strict';
app.controller('signUp', function search($scope, $http, $log) {
    $scope.state = {
        email: false,
        name: false
    }
    $scope.check = function(inputValue, checkType) {
        $http.post('http://localhost:8081/auth/check', {
            data: inputValue,
            check: checkType
        }).then(function(response) {
            $log.log('test: ' + response.data.length)
            if (response.data.length > 0) {
                $scope.state[checkType] = true
            } else if (response.data.length == 0) {
                $scope.state[checkType] = false
            }
        })
    }
});

'use strict';
app.controller('user', function user($scope, $http, $log, $timeout, $location, swearing) {

    $scope.message = '';
    $scope.feedback = true;
    $scope.feedback_state = true;
    $scope.authenticated = false;
    $scope.likes_state = false;




    $scope.setFeedback = function(val) {
        if (val) {
            return 'like'
        } else {
            return 'dislike'
        }
    }

    $scope.validate = function(message) {

        swearing.forEach(function(element) {
            var regexp = new RegExp(element, 'gi')
            $scope.message = $scope.message.replace(regexp, '[censored]')
        })


        if ($scope.message.length > 10) {

            $scope.feedback_state = false;
        } else if ($scope.message.length < 10) {
            $scope.feedback_state = true;
        }
    }
    $scope.complain = function(user_id, comment_id) {
      $log.log('complain')
        $http.post('http://localhost:8081/book/comment/complain/', {
            user_id: user_id,
            comment_id: comment_id

        }).then(function(response) {

        })
    }

    $scope.addLike = function(like_type, id) {
        if ($scope.authenticated) {

            $http.post('http://localhost:8081/book/comment/add/' + like_type + '/' + id, {
                    book_id: $location.absUrl().split('/').pop(),
                    coment_id: id
                })
                .then(function(response) {
                    $scope.b = response.data;

                })

        }
    }
    $scope.showLikes = function(like_type, coment_id, item) {
        /*
          $log.log('item', item, like_type)
          if (like_type == 'likes' && item.suma < 1) {
              $log.log('like working state', 'state', $scope.likes_state)
              return false;
          } else if (like_type == 'dislikes' && item.suma2 < 1) {
              $log.log('dislike working state', 'state', $scope.likes_state)
              return false;
          } else {*/
        $http({
            url: 'http://localhost:8081/book/showLikes/' + like_type + '/' + coment_id,
            method: 'GET'
        }).then(function(res) {
            $scope.likeNames = '';
            $scope.likeNames = res.data.data;
            $scope.likes_state = true;

            //access returned res here

        }, function(error) {
            //handle error here
        });
        //  }




    }
    $scope.leave = function() {
        $scope.likeNames = '';
        $scope.likes_state = false;

    }



    $scope.showPopUp = function() {

    }
    $scope.hidePopUp = function() {

        $scope.x = false;
    }
    $scope.load = function(auth) {

        $scope.curBook = $location.absUrl().split('/').pop()

        $http.get('http://localhost:8081/book/comments/' + $scope.curBook, {
            /*
                        coment: $scope.message,
                        feedback: $scope.feedback
                  */
        }).then(function(response) {

            $scope.b = response.data.data;
            $scope.authenticated = response.data.authenticated;

        })




    }
    $scope.addComment = function() {

        $scope.curBook = $location.absUrl().split('/').pop()
        $http.post('http://localhost:8081/book/add/comment/' + $scope.curBook, {
            coment: $scope.message,
            feedback: $scope.feedback
        }).then(function(response) {

            $scope.b = response.data.data;

        })
    }



    //ng-mouseenter="popUp"+item.id+"=true" ng-mouseleave="popUp"+item.id+"=false"



});

'use strict';
app.controller('admin', function admin($scope, $http, $log) {
    $log.log('start')
    $scope.data = "";
    $scope.user={}
    $scope.load = function(changePassword) {


        $http.post('http://localhost:8081/home/administrator/admin', {
          change:changePassword,
          password: $scope.user.password,
          id:$scope.user.id,
        }).then(function(response) {
console.log('load administrator')
            $log.log('response', response.data.data)
            $scope.data = response.data.data;
        })




    }

    $scope.changePass = function(item) {
        item.password = item.password;
        $scope.user={
          password:item.password,
          id:item.id
        }
        $log.log('password ' + item.password)
        $scope.load(true)
    }
})
